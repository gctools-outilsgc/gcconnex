define(function(t){function e(t){Dt.extend(!0,Ct,t)}function n(t,e,n){function l(t){nt?v()&&(M(),D(t)):c()}function c(){rt=e.theme?"ui":"fc",t.addClass("fc"),e.isRTL?t.addClass("fc-rtl"):t.addClass("fc-ltr"),e.theme&&t.addClass("ui-widget"),nt=Dt("<div class='fc-content' style='position:relative'/>").prependTo(t),tt=new r(Q,e),et=tt.render(),et&&t.prepend(et),p(e.defaultView),e.handleWindowResize&&Dt(window).resize(S),g()||u()}function u(){setTimeout(function(){!at.start&&g()&&b()},0)}function d(){at&&(K("viewDestroy",at,at,at.element),at.triggerEventDestroy()),Dt(window).unbind("resize",S),tt.destroy(),nt.remove(),t.removeClass("fc fc-rtl ui-widget")}function v(){return t.is(":visible")}function g(){return Dt("body").is(":visible")}function p(t){at&&t==at.name||m(t)}function m(t){dt++,at&&(K("viewDestroy",at,at,at.element),q(),at.triggerEventDestroy(),U(),at.element.remove(),tt.deactivateButton(at.name)),tt.activateButton(t),at=new St[t](Dt("<div class='fc-view fc-view-"+t+"' style='position:relative'/>").appendTo(nt),Q),b(),Z(),dt--}function b(t){(!at.start||t||vt<at.start||vt>=at.end)&&v()&&D(t)}function D(t){dt++,at.start&&(K("viewDestroy",at,at,at.element),q(),H()),U(),at.render(vt,t||0),E(),Z(),(at.afterRender||W)(),O(),L(),K("viewRender",at,at,at.element),at.trigger("viewDisplay",ut),dt--,R()}function C(){v()&&(q(),H(),M(),E(),k())}function M(){it=e.contentHeight?e.contentHeight:e.height?e.height-(et?et.height():0)-F(nt):Math.round(nt.width()/Math.max(e.aspectRatio,.5))}function E(){void 0===it&&M(),dt++,at.setHeight(it),at.setWidth(nt.width()),dt--,ot=t.outerWidth()}function S(){if(!dt)if(at.start){var e=++ft;setTimeout(function(){e==ft&&!dt&&v()&&ot!=(ot=t.outerWidth())&&(dt++,C(),at.trigger("windowResize",ut),dt--)},200)}else u()}function T(){H(),N()}function x(t){H(),k(t)}function k(t){v()&&(at.setEventData(ht),at.renderEvents(ht,t),at.trigger("eventAfterAllRender"))}function H(){at.triggerEventDestroy(),at.clearEvents(),at.clearEventData()}function R(){!e.lazyFetching||lt(at.visStart,at.visEnd)?N():k()}function N(){ct(at.visStart,at.visEnd)}function z(t){ht=t,k()}function A(t){x(t)}function O(){tt.updateTitle(at.title)}function L(){var t=new Date;t>=at.start&&t<at.end?tt.disableButton("today"):tt.enableButton("today")}function _(t,e,n){at.select(t,e,void 0===n?!0:n)}function q(){at&&at.unselect()}function P(){b(-1)}function Y(){b(1)}function B(){o(vt,-1),b()}function j(){o(vt,1),b()}function I(){vt=new Date,b()}function X(t,e,n){t instanceof Date?vt=f(t):h(vt,t,e,n),b()}function J(t,e,n){void 0!==t&&o(vt,t),void 0!==e&&i(vt,e),void 0!==n&&s(vt,n),b()}function V(){return f(vt)}function U(){nt.css({width:"100%",height:nt.height(),overflow:"hidden"})}function Z(){nt.css({width:"",height:"",overflow:""})}function G(){return at}function $(t,n){return void 0===n?e[t]:void(("height"==t||"contentHeight"==t||"aspectRatio"==t)&&(e[t]=n,C()))}function K(t,n){return e[t]?e[t].apply(n||ut,Array.prototype.slice.call(arguments,2)):void 0}var Q=this;Q.options=e,Q.render=l,Q.destroy=d,Q.refetchEvents=T,Q.reportEvents=z,Q.reportEventChange=A,Q.rerenderEvents=x,Q.changeView=p,Q.select=_,Q.unselect=q,Q.prev=P,Q.next=Y,Q.prevYear=B,Q.nextYear=j,Q.today=I,Q.gotoDate=X,Q.incrementDate=J,Q.formatDate=function(t,n){return y(t,n,e)},Q.formatDates=function(t,n,r){return w(t,n,r,e)},Q.getDate=V,Q.getView=G,Q.option=$,Q.trigger=K,a.call(Q,e,n);var tt,et,nt,rt,at,ot,it,st,lt=Q.isFetchNeeded,ct=Q.fetchEvents,ut=t[0],ft=0,dt=0,vt=new Date,ht=[];h(vt,e.year,e.month,e.date),e.droppable&&Dt(document).bind("dragstart",function(t,n){var r=t.target,a=Dt(r);if(!a.parents(".fc").length){var o=e.dropAccept;(Dt.isFunction(o)?o.call(r,a):a.is(o))&&(st=r,at.dragStart(st,t,n))}}).bind("dragstop",function(t,e){st&&(at.dragStop(st,t,e),st=null)})}function r(t,e){function n(){f=e.theme?"ui":"fc";var t=e.header;return t?d=Dt("<table class='fc-header' style='width:100%'/>").append(Dt("<tr/>").append(a("left")).append(a("center")).append(a("right"))):void 0}function r(){d.remove()}function a(n){var r=Dt("<td class='fc-header-"+n+"'/>"),a=e.header[n];return a&&Dt.each(a.split(" "),function(n){n>0&&r.append("<span class='fc-header-space'/>");var a;Dt.each(this.split(","),function(n,o){if("title"==o)r.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),a&&a.addClass(f+"-corner-right"),a=null;else{var i;if(t[o]?i=t[o]:St[o]&&(i=function(){c.removeClass(f+"-state-hover"),t.changeView(o)}),i){var s=e.theme?_(e.buttonIcons,o):null,l=_(e.buttonText,o),c=Dt("<span class='fc-button fc-button-"+o+" "+f+"-state-default'>"+(s?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+s+"'/></span>":l)+"</span>").click(function(){c.hasClass(f+"-state-disabled")||i()}).mousedown(function(){c.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-down")}).mouseup(function(){c.removeClass(f+"-state-down")}).hover(function(){c.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-hover")},function(){c.removeClass(f+"-state-hover").removeClass(f+"-state-down")}).appendTo(r);P(c),a||c.addClass(f+"-corner-left"),a=c}}}),a&&a.addClass(f+"-corner-right")}),r}function o(t){d.find("h2").html(t)}function i(t){d.find("span.fc-button-"+t).addClass(f+"-state-active")}function s(t){d.find("span.fc-button-"+t).removeClass(f+"-state-active")}function l(t){d.find("span.fc-button-"+t).addClass(f+"-state-disabled")}function c(t){d.find("span.fc-button-"+t).removeClass(f+"-state-disabled")}var u=this;u.render=n,u.destroy=r,u.updateTitle=o,u.activateButton=i,u.deactivateButton=s,u.disableButton=l,u.enableButton=c;var f,d=Dt([])}function a(t,e){function n(t,e){return!C||C>t||e>M}function r(t,e){C=t,M=e,N=[];var n=++H,r=k.length;F=r;for(var o=0;r>o;o++)a(k[o],n)}function a(e,n){o(e,function(r){if(n==H){if(r){t.eventDataTransform&&(r=Dt.map(r,t.eventDataTransform)),e.eventDataTransform&&(r=Dt.map(r,e.eventDataTransform));for(var a=0;a<r.length;a++)r[a].source=e,m(r[a]);N=N.concat(r)}F--,F||T(N)}})}function o(e,n){var r,a,i=Et.sourceFetchers;for(r=0;r<i.length;r++){if(a=i[r](e,C,M,n),a===!0)return;if("object"==typeof a)return void o(a,n)}var s=e.events;if(s)Dt.isFunction(s)?(h(),s(f(C),f(M),function(t){n(t),p()})):Dt.isArray(s)?n(s):n();else{var l=e.url;if(l){var c,u=e.success,d=e.error,v=e.complete;c=Dt.isFunction(e.data)?e.data():e.data;var g=Dt.extend({},c||{}),m=I(e.startParam,t.startParam),y=I(e.endParam,t.endParam);m&&(g[m]=Math.round(+C/1e3)),y&&(g[y]=Math.round(+M/1e3)),h(),Dt.ajax(Dt.extend({},Tt,e,{data:g,success:function(t){t=t||[];var e=j(u,this,arguments);Dt.isArray(e)&&(t=e),n(t)},error:function(){j(d,this,arguments),n()},complete:function(){j(v,this,arguments),p()}}))}else n()}}function i(t){t=s(t),t&&(F++,a(t,H))}function s(t){return Dt.isFunction(t)||Dt.isArray(t)?t={events:t}:"string"==typeof t&&(t={url:t}),"object"==typeof t?(y(t),k.push(t),t):void 0}function l(t){k=Dt.grep(k,function(e){return!w(e,t)}),N=Dt.grep(N,function(e){return!w(e.source,t)}),T(N)}function c(t){var e,n,r=N.length,a=S().defaultEventEnd,o=t.start-t._start,i=t.end?t.end-(t._end||a(t)):0;for(e=0;r>e;e++)n=N[e],n._id==t._id&&n!=t&&(n.start=new Date(+n.start+o),t.end?n.end?n.end=new Date(+n.end+i):n.end=new Date(+a(n)+i):n.end=null,n.title=t.title,n.url=t.url,n.allDay=t.allDay,n.className=t.className,n.editable=t.editable,n.color=t.color,n.backgroundColor=t.backgroundColor,n.borderColor=t.borderColor,n.textColor=t.textColor,m(n));m(t),T(N)}function u(t,e){m(t),t.source||(e&&(x.events.push(t),t.source=x),N.push(t)),T(N)}function d(t){if(t){if(!Dt.isFunction(t)){var e=t+"";t=function(t){return t._id==e}}N=Dt.grep(N,t,!0);for(var n=0;n<k.length;n++)Dt.isArray(k[n].events)&&(k[n].events=Dt.grep(k[n].events,t,!0))}else{N=[];for(var n=0;n<k.length;n++)Dt.isArray(k[n].events)&&(k[n].events=[])}T(N)}function v(t){return Dt.isFunction(t)?Dt.grep(N,t):t?(t+="",Dt.grep(N,function(e){return e._id==t})):N}function h(){R++||E("loading",null,!0,S())}function p(){--R||E("loading",null,!1,S())}function m(e){var n=e.source||{},r=I(n.ignoreTimezone,t.ignoreTimezone);e._id=e._id||(void 0===e.id?"_fc"+xt++:e.id+""),e.date&&(e.start||(e.start=e.date),delete e.date),e._start=f(e.start=g(e.start,r)),e.end=g(e.end,r),e.end&&e.end<=e.start&&(e.end=null),e._end=e.end?f(e.end):null,void 0===e.allDay&&(e.allDay=I(n.allDayDefault,t.allDayDefault)),e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[]}function y(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=Et.sourceNormalizers,n=0;n<e.length;n++)e[n](t)}function w(t,e){return t&&e&&b(t)==b(e)}function b(t){return("object"==typeof t?t.events||t.url:"")||t}var D=this;D.isFetchNeeded=n,D.fetchEvents=r,D.addEventSource=i,D.removeEventSource=l,D.updateEvent=c,D.renderEvent=u,D.removeEvents=d,D.clientEvents=v,D.normalizeEvent=m;for(var C,M,E=D.trigger,S=D.getView,T=D.reportEvents,x={events:[]},k=[x],H=0,F=0,R=0,N=[],z=0;z<e.length;z++)s(e[z])}function o(t,e,n){return t.setFullYear(t.getFullYear()+e),n||u(t),t}function i(t,e,n){if(+t){var r=t.getMonth()+e,a=f(t);for(a.setDate(1),a.setMonth(r),t.setMonth(r),n||u(t);t.getMonth()!=a.getMonth();)t.setDate(t.getDate()+(a>t?1:-1))}return t}function s(t,e,n){if(+t){var r=t.getDate()+e,a=f(t);a.setHours(9),a.setDate(r),t.setDate(r),n||u(t),l(t,a)}return t}function l(t,e){if(+t)for(;t.getDate()!=e.getDate();)t.setTime(+t+(e>t?1:-1)*Ft)}function c(t,e){return t.setMinutes(t.getMinutes()+e),t}function u(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function f(t,e){return e?u(new Date(+t)):new Date(+t)}function d(){var t,e=0;do t=new Date(1970,e++,1);while(t.getHours());return t}function v(t,e){return Math.round((f(t,!0)-f(e,!0))/Ht)}function h(t,e,n,r){void 0!==e&&e!=t.getFullYear()&&(t.setDate(1),t.setMonth(0),t.setFullYear(e)),void 0!==n&&n!=t.getMonth()&&(t.setDate(1),t.setMonth(n)),void 0!==r&&t.setDate(r)}function g(t,e){return"object"==typeof t?t:"number"==typeof t?new Date(1e3*t):"string"==typeof t?t.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(t)):(void 0===e&&(e=!0),p(t,e)||(t?new Date(t):null)):null}function p(t,e){var n=t.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var r=new Date(n[1],0,1);if(e||!n[13]){var a=new Date(n[1],0,1,9,0);n[3]&&(r.setMonth(n[3]-1),a.setMonth(n[3]-1)),n[5]&&(r.setDate(n[5]),a.setDate(n[5])),l(r,a),n[7]&&r.setHours(n[7]),n[8]&&r.setMinutes(n[8]),n[10]&&r.setSeconds(n[10]),n[12]&&r.setMilliseconds(1e3*Number("0."+n[12])),l(r,a)}else if(r.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),r.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var o=60*Number(n[16])+(n[18]?Number(n[18]):0);o*="-"==n[15]?1:-1,r=new Date(+r+60*o*1e3)}return r}function m(t){if("number"==typeof t)return 60*t;if("object"==typeof t)return 60*t.getHours()+t.getMinutes();var e=t.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(e){var n=parseInt(e[1],10);return e[3]&&(n%=12,"p"==e[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(e[2]?parseInt(e[2],10):0)}}function y(t,e,n){return w(t,null,e,n)}function w(t,e,n,r){r=r||Ct;var a,o,i,s,l=t,c=e,u=n.length,f="";for(a=0;u>a;a++)if(o=n.charAt(a),"'"==o){for(i=a+1;u>i;i++)if("'"==n.charAt(i)){l&&(f+=i==a+1?"'":n.substring(a+1,i),a=i);break}}else if("("==o){for(i=a+1;u>i;i++)if(")"==n.charAt(i)){var d=y(l,n.substring(a+1,i),r);parseInt(d.replace(/\D/,""),10)&&(f+=d),a=i;break}}else if("["==o){for(i=a+1;u>i;i++)if("]"==n.charAt(i)){var v=n.substring(a+1,i),d=y(l,v,r);d!=y(c,v,r)&&(f+=d),a=i;break}}else if("{"==o)l=e,c=t;else if("}"==o)l=t,c=e;else{for(i=u;i>a;i--)if(s=Nt[n.substring(a,i)]){l&&(f+=s(l,r)),a=i-1;break}i==a&&l&&(f+=o)}return f}function b(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1}function D(t){return t.end?C(t.end,t.allDay):s(f(t.start),1)}function C(t,e){return t=f(t),e||t.getHours()||t.getMinutes()?s(t,1):u(t)}function M(t,e,n){t.unbind("mouseover").mouseover(function(t){for(var r,a,o,i=t.target;i!=this;)r=i,i=i.parentNode;void 0!==(a=r._fci)&&(r._fci=void 0,o=e[a],n(o.event,o.element,o),Dt(t.target).trigger(t)),t.stopPropagation()})}function E(t,e,n){for(var r,a=0;a<t.length;a++)r=Dt(t[a]),r.width(Math.max(0,e-T(r,n)))}function S(t,e,n){for(var r,a=0;a<t.length;a++)r=Dt(t[a]),r.height(Math.max(0,e-F(r,n)))}function T(t,e){return x(t)+H(t)+(e?k(t):0)}function x(t){return(parseFloat(Dt.css(t[0],"paddingLeft",!0))||0)+(parseFloat(Dt.css(t[0],"paddingRight",!0))||0)}function k(t){return(parseFloat(Dt.css(t[0],"marginLeft",!0))||0)+(parseFloat(Dt.css(t[0],"marginRight",!0))||0)}function H(t){return(parseFloat(Dt.css(t[0],"borderLeftWidth",!0))||0)+(parseFloat(Dt.css(t[0],"borderRightWidth",!0))||0)}function F(t,e){return R(t)+z(t)+(e?N(t):0)}function R(t){return(parseFloat(Dt.css(t[0],"paddingTop",!0))||0)+(parseFloat(Dt.css(t[0],"paddingBottom",!0))||0)}function N(t){return(parseFloat(Dt.css(t[0],"marginTop",!0))||0)+(parseFloat(Dt.css(t[0],"marginBottom",!0))||0)}function z(t){return(parseFloat(Dt.css(t[0],"borderTopWidth",!0))||0)+(parseFloat(Dt.css(t[0],"borderBottomWidth",!0))||0)}function W(){}function A(t,e){return t-e}function O(t){return Math.max.apply(Math,t)}function L(t){return(10>t?"0":"")+t}function _(t,e){if(void 0!==t[e])return t[e];for(var n,r=e.split(/(?=[A-Z])/),a=r.length-1;a>=0;a--)if(n=t[r[a].toLowerCase()],void 0!==n)return n;return t[""]}function q(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function P(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function Y(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function B(t,e){var n=t.source||{},r=t.color,a=n.color,o=e("eventColor"),i=t.backgroundColor||r||n.backgroundColor||a||e("eventBackgroundColor")||o,s=t.borderColor||r||n.borderColor||a||e("eventBorderColor")||o,l=t.textColor||n.textColor||e("eventTextColor"),c=[];return i&&c.push("background-color:"+i),s&&c.push("border-color:"+s),l&&c.push("color:"+l),c.join(";")}function j(t,e,n){if(Dt.isFunction(t)&&(t=[t]),t){var r,a;for(r=0;r<t.length;r++)a=t[r].apply(e,n)||a;return a}}function I(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]}function X(t,e){function n(t,e){e&&(i(t,e),t.setDate(1));var n=a("firstDay"),d=f(t,!0);d.setDate(1);var h=i(f(d),1),g=f(d);s(g,-((g.getDay()-n+7)%7)),l(g);var p=f(h);s(p,(7-p.getDay()+n)%7),l(p,-1,!0);var m=c(),y=Math.round(v(p,g)/7);"fixed"==a("weekMode")&&(s(p,7*(6-y)),y=6),r.title=u(d,a("titleFormat")),r.start=d,r.end=h,r.visStart=g,r.visEnd=p,o(y,m,!0)}var r=this;r.render=n,U.call(r,t,e,"month");var a=r.opt,o=r.renderBasic,l=r.skipHiddenDays,c=r.getCellsPerWeek,u=e.formatDate}function J(t,e){function n(t,e){e&&s(t,7*e);var n=s(f(t),-((t.getDay()-a("firstDay")+7)%7)),u=s(f(n),7),d=f(n);i(d);var v=f(u);i(v,-1,!0);var h=l();r.start=n,r.end=u,r.visStart=d,r.visEnd=v,r.title=c(d,s(f(v),-1),a("titleFormat")),o(1,h,!1)}var r=this;r.render=n,U.call(r,t,e,"basicWeek");var a=r.opt,o=r.renderBasic,i=r.skipHiddenDays,l=r.getCellsPerWeek,c=e.formatDates}function V(t,e){function n(t,e){e&&s(t,e),i(t,0>e?-1:1);var n=f(t,!0),c=s(f(n),1);r.title=l(t,a("titleFormat")),r.start=r.visStart=n,r.end=r.visEnd=c,o(1,1,!1)}var r=this;r.render=n,U.call(r,t,e,"basicDay");var a=r.opt,o=r.renderBasic,i=r.skipHiddenDays,l=e.formatDate}function U(t,e,n){function r(t,e,n){tt=t,et=e,nt=n,a(),B||o(),i()}function a(){st=vt("theme")?"ui":"fc",lt=vt("columnFormat"),ct=vt("weekNumbers"),ft=vt("weekNumberTitle"),dt="iso"!=vt("weekNumberCalculation")?"w":"W"}function o(){U=Dt("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(t)}function i(){var e=l();O&&O.remove(),O=Dt(e).appendTo(t),L=O.find("thead"),_=L.find(".fc-day-header"),B=O.find("tbody"),j=B.find("tr"),I=B.find(".fc-day"),X=j.find("td:first-child"),J=j.eq(0).find(".fc-day > div"),V=j.eq(0).find(".fc-day-content > div"),Y(L.add(L.find("tr"))),Y(j),j.eq(0).addClass("fc-first"),j.filter(":last").addClass("fc-last"),I.each(function(t,e){var n=Et(Math.floor(t/et),t%et);ht("dayRender",A,n,Dt(e))}),m(I)}function l(){var t="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+c()+d()+"</table>";return t}function c(){var t,e,n=st+"-widget-header",r="";for(r+="<thead><tr>",ct&&(r+="<th class='fc-week-number "+n+"'>"+q(ft)+"</th>"),t=0;et>t;t++)e=Et(0,t),r+="<th class='fc-day-header fc-"+kt[e.getDay()]+" "+n+"'>"+q(xt(e,lt))+"</th>";return r+="</tr></thead>"}function d(){var t,e,n,r=st+"-widget-content",a="";for(a+="<tbody>",t=0;tt>t;t++){for(a+="<tr class='fc-week'>",ct&&(n=Et(t,0),a+="<td class='fc-week-number "+r+"'><div>"+q(xt(n,dt))+"</div></td>"),e=0;et>e;e++)n=Et(t,e),a+=v(n);a+="</tr>"}return a+="</tbody>"}function v(t){var e=st+"-widget-content",n=A.start.getMonth(),r=u(new Date),a="",o=["fc-day","fc-"+kt[t.getDay()],e];return t.getMonth()!=n&&o.push("fc-other-month"),+t==+r?o.push("fc-today",st+"-state-highlight"):r>t?o.push("fc-past"):o.push("fc-future"),a+="<td class='"+o.join(" ")+"' data-date='"+xt(t,"yyyy-MM-dd")+"'><div>",nt&&(a+="<div class='fc-day-number'>"+t.getDate()+"</div>"),a+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function h(t){$=t;var e,n,r,a=$-L.height();"variable"==vt("weekMode")?e=n=Math.floor(a/(1==tt?2:6)):(e=Math.floor(a/tt),n=a-e*(tt-1)),X.each(function(t,a){tt>t&&(r=Dt(a),r.find("> div").css("min-height",(t==tt-1?n:e)-F(r)))})}function g(t){G=t,ot.clear(),it.clear(),Q=0,ct&&(Q=L.find("th.fc-week-number").outerWidth()),K=Math.floor((G-Q)/et),E(_.slice(0,-1),K)}function m(t){t.click(y).mousedown(Mt)}function y(t){if(!vt("selectable")){var e=p(Dt(this).data("date"));ht("dayClick",this,e,!0,t)}}function w(t,e,n){n&&rt.build();for(var r=Tt(t,e),a=0;a<r.length;a++){var o=r[a];m(b(o.row,o.leftCol,o.row,o.rightCol))}}function b(e,n,r,a){var o=rt.rect(e,n,r,a,t);return wt(o,t)}function D(t,e){return f(t)}function C(t,e,n){w(t,s(f(e),1),!0)}function M(){Ct()}function S(t,e,n){var r=St(t),a=I[r.row*et+r.col];ht("dayClick",a,t,e,n)}function T(t,e,n){at.start(function(t){Ct(),t&&b(t.row,t.col,t.row,t.col)},e)}function x(t,e,n){var r=at.stop();if(Ct(),r){var a=Et(r);ht("drop",t,a,!0,e,n)}}function k(t){return f(t.start)}function H(t){return ot.left(t)}function R(t){return ot.right(t)}function N(t){return it.left(t)}function z(t){return it.right(t)}function W(t){return j.eq(t)}var A=this;A.renderBasic=r,A.setHeight=h,A.setWidth=g,A.renderDayOverlay=w,A.defaultSelectionEnd=D,A.renderSelection=C,A.clearSelection=M,A.reportDayClick=S,A.dragStart=T,A.dragStop=x,A.defaultEventEnd=k,A.getHoverListener=function(){return at},A.colLeft=H,A.colRight=R,A.colContentLeft=N,A.colContentRight=z,A.getIsCellAllDay=function(){return!0},A.allDayRow=W,A.getRowCnt=function(){return tt},A.getColCnt=function(){return et},A.getColWidth=function(){return K},A.getDaySegmentContainer=function(){return U},ut.call(A,t,e,n),pt.call(A),gt.call(A),Z.call(A);var O,L,_,B,j,I,X,J,V,U,G,$,K,Q,tt,et,nt,rt,at,ot,it,st,lt,ct,ft,dt,vt=A.opt,ht=A.trigger,wt=A.renderOverlay,Ct=A.clearOverlays,Mt=A.daySelectionMousedown,Et=A.cellToDate,St=A.dateToCell,Tt=A.rangeToSegments,xt=e.formatDate;P(t.addClass("fc-grid")),rt=new mt(function(t,e){var n,r,a;_.each(function(t,o){n=Dt(o),r=n.offset().left,t&&(a[1]=r),a=[r],e[t]=a}),a[1]=r+n.outerWidth(),j.each(function(e,o){tt>e&&(n=Dt(o),r=n.offset().top,e&&(a[1]=r),a=[r],t[e]=a)}),a[1]=r+n.outerHeight()}),at=new yt(rt),ot=new bt(function(t){return J.eq(t)}),it=new bt(function(t){return V.eq(t)})}function Z(){function t(t,e){n.renderDayEvents(t,e)}function e(){n.getDaySegmentContainer().empty()}var n=this;n.renderEvents=t,n.clearEvents=e,ft.call(n)}function G(t,e){function n(t,e){e&&s(t,7*e);var n=s(f(t),-((t.getDay()-a("firstDay")+7)%7)),u=s(f(n),7),d=f(n);i(d);var v=f(u);i(v,-1,!0);var h=l();r.title=c(d,s(f(v),-1),a("titleFormat")),r.start=n,r.end=u,r.visStart=d,r.visEnd=v,o(h)}var r=this;r.render=n,K.call(r,t,e,"agendaWeek");var a=r.opt,o=r.renderAgenda,i=r.skipHiddenDays,l=r.getCellsPerWeek,c=e.formatDates}function $(t,e){function n(t,e){e&&s(t,e),i(t,0>e?-1:1);var n=f(t,!0),c=s(f(n),1);r.title=l(t,a("titleFormat")),r.start=r.visStart=n,r.end=r.visEnd=c,o(1)}var r=this;r.render=n,K.call(r,t,e,"agendaDay");var a=r.opt,o=r.renderAgenda,i=r.skipHiddenDays,l=e.formatDate}function K(t,e,n){function r(t){zt=t,a(),$?i():o()}function a(){qt=Vt("theme")?"ui":"fc",Pt=Vt("isRTL"),Yt=m(Vt("minTime")),Bt=m(Vt("maxTime")),jt=Vt("columnFormat"),It=Vt("weekNumbers"),Xt=Vt("weekNumberTitle"),Jt="iso"!=Vt("weekNumberCalculation")?"w":"W",Ft=Vt("snapMinutes")||Vt("slotMinutes")}function o(){var e,n,r,a,o,s=qt+"-widget-header",l=qt+"-widget-content",u=Vt("slotMinutes")%15==0;for(i(),st=Dt("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(t),Vt("allDaySlot")?(lt=Dt("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(st),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+s+" fc-agenda-axis'>"+Vt("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+s+" fc-agenda-gutter'>&nbsp;</th></tr></table>",ct=Dt(e).appendTo(st),ft=ct.find("tr"),b(ft.find("td")),st.append("<div class='fc-agenda-divider "+s+"'><div class='fc-agenda-divider-inner'/></div>")):lt=Dt([]),dt=Dt("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(st),vt=Dt("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(dt),ht=Dt("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(vt),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",n=d(),a=c(f(n),Bt),c(n,Yt),Wt=0,r=0;a>n;r++)o=n.getMinutes(),e+="<tr class='fc-slot"+r+" "+(o?"fc-minor":"")+"'><th class='fc-agenda-axis "+s+"'>"+(u&&o?"&nbsp;":ae(n,Vt("axisFormat")))+"</th><td class='"+l+"'><div style='position:relative'>&nbsp;</div></td></tr>",c(n,Vt("slotMinutes")),Wt++;e+="</tbody></table>",wt=Dt(e).appendTo(vt),D(wt.find("td"))}function i(){var e=l();$&&$.remove(),$=Dt(e).appendTo(t),K=$.find("thead"),tt=K.find("th").slice(1,-1),et=$.find("tbody"),nt=et.find("td").slice(0,-1),rt=nt.find("> div"),at=nt.find(".fc-day-content > div"),ot=nt.eq(0),it=rt.eq(0),Y(K.add(K.find("tr"))),Y(et.add(et.find("tr")))}function l(){var t="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+v()+h()+"</table>";return t}function v(){var t,e,n,r=qt+"-widget-header",a="";for(a+="<thead><tr>",It?(t=ee(0,0),e=ae(t,Jt),Pt?e+=Xt:e=Xt+e,a+="<th class='fc-agenda-axis fc-week-number "+r+"'>"+q(e)+"</th>"):a+="<th class='fc-agenda-axis "+r+"'>&nbsp;</th>",n=0;zt>n;n++)t=ee(0,n),a+="<th class='fc-"+kt[t.getDay()]+" fc-col"+n+" "+r+"'>"+q(ae(t,jt))+"</th>";return a+="<th class='fc-agenda-gutter "+r+"'>&nbsp;</th></tr></thead>"}function h(){var t,e,n,r,a,o=qt+"-widget-header",i=qt+"-widget-content",s=u(new Date),l="";for(l+="<tbody><tr><th class='fc-agenda-axis "+o+"'>&nbsp;</th>",n="",e=0;zt>e;e++)t=ee(0,e),a=["fc-col"+e,"fc-"+kt[t.getDay()],i],+t==+s?a.push(qt+"-state-highlight","fc-today"):s>t?a.push("fc-past"):a.push("fc-future"),r="<td class='"+a.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>",n+=r;return l+=n,l+="<td class='fc-agenda-gutter "+i+"'>&nbsp;</td></tr></tbody>"}function g(t){void 0===t&&(t=Et),Et=t,oe={};var e=et.position().top,n=dt.position().top,r=Math.min(t-e,wt.height()+n+1);it.height(r-F(ot)),st.css("top",e),dt.height(r-n-1),Ht=wt.find("tr:first").height()+1,Rt=Vt("slotMinutes")/Ft,Nt=Ht/Rt}function p(t){Mt=t,Lt.clear(),_t.clear();var e=K.find("th:first");ct&&(e=e.add(ct.find("th:first"))),e=e.add(wt.find("th:first")),St=0,E(e.width("").each(function(t,e){St=Math.max(St,Dt(e).outerWidth())}),St);var n=$.find(".fc-agenda-gutter");ct&&(n=n.add(ct.find("th.fc-agenda-gutter")));var r=dt[0].clientWidth;xt=dt.width()-r,xt?(E(n,xt),n.show().prev().removeClass("fc-last")):n.hide().prev().addClass("fc-last"),Tt=Math.floor((r-St)/zt),E(tt.slice(0,-1),Tt)}function y(){function t(){dt.scrollTop(r)}var e=d(),n=f(e);n.setHours(Vt("firstHour"));var r=O(e,n)+1;t(),setTimeout(t,0)}function w(){y()}function b(t){t.click(C).mousedown(Qt)}function D(t){t.click(C).mousedown(J)}function C(t){if(!Vt("selectable")){var e=Math.min(zt-1,Math.floor((t.pageX-$.offset().left-St)/Tt)),n=ee(0,e),r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){var a=parseInt(r[1])*Vt("slotMinutes"),o=Math.floor(a/60);n.setHours(o),n.setMinutes(a%60+Yt),Ut("dayClick",nt[e],n,!1,t)}else Ut("dayClick",nt[e],n,!0,t)}}function M(t,e,n){n&&At.build();for(var r=re(t,e),a=0;a<r.length;a++){var o=r[a];b(T(o.row,o.leftCol,o.row,o.rightCol))}}function T(t,e,n,r){var a=At.rect(t,e,n,r,st);return Zt(a,st)}function x(t,e){for(var n=0;zt>n;n++){var r=ee(0,n),a=s(f(r),1),o=new Date(Math.max(r,t)),i=new Date(Math.min(a,e));if(i>o){var l=At.rect(0,n,0,n,vt),c=O(r,o),u=O(r,i);l.top=c,l.height=u-c,D(Zt(l,vt))}}}function k(t){return Lt.left(t)}function H(t){return _t.left(t)}function R(t){return Lt.right(t)}function N(t){return _t.right(t)}function z(t){return Vt("allDaySlot")&&!t.row}function W(t){var e=ee(0,t.col),n=t.row;return Vt("allDaySlot")&&n--,n>=0&&c(e,Yt+n*Ft),e}function O(t,e){if(t=f(t,!0),e<c(f(t),Yt))return 0;if(e>=c(f(t),Bt))return wt.height();var n=Vt("slotMinutes"),r=60*e.getHours()+e.getMinutes()-Yt,a=Math.floor(r/n),o=oe[a];return void 0===o&&(o=oe[a]=wt.find("tr").eq(a).find("td div")[0].offsetTop),Math.max(0,Math.round(o-1+Ht*(r%n/n)))}function L(t){return ft}function _(t){var e=f(t.start);return t.allDay?e:c(e,Vt("defaultEventMinutes"))}function B(t,e){return e?f(t):c(f(t),Vt("slotMinutes"))}function j(t,e,n){n?Vt("allDaySlot")&&M(t,s(f(e),1),!0):I(t,e)}function I(t,e){var n=Vt("selectHelper");if(At.build(),n){var r=ne(t).col;if(r>=0&&zt>r){var a=At.rect(0,r,0,r,vt),o=O(t,t),i=O(t,e);if(i>o){if(a.top=o,a.height=i-o,a.left+=2,a.width-=5,Dt.isFunction(n)){var s=n(t,e);s&&(a.position="absolute",Ct=Dt(s).css(a).appendTo(vt))}else a.isStart=!0,a.isEnd=!0,Ct=Dt(te({title:"",start:t,end:e,className:["fc-select-helper"],editable:!1},a)),Ct.css("opacity",Vt("dragOpacity"));Ct&&(D(Ct),vt.append(Ct),E(Ct,a.width,!0),S(Ct,a.height,!0))}}}else x(t,e)}function X(){Gt(),Ct&&(Ct.remove(),Ct=null)}function J(t){if(1==t.which&&Vt("selectable")){Kt(t);var e;Ot.start(function(t,n){if(X(),t&&t.col==n.col&&!z(t)){var r=W(n),a=W(t);e=[r,c(f(r),Ft),a,c(f(a),Ft)].sort(A),I(e[0],e[3])}else e=null},t),Dt(document).one("mouseup",function(t){Ot.stop(),e&&(+e[0]==+e[1]&&V(e[0],!1,t),$t(e[0],e[3],!1,t))})}}function V(t,e,n){Ut("dayClick",nt[ne(t).col],t,e,n)}function U(t,e,n){Ot.start(function(t){if(Gt(),t)if(z(t))T(t.row,t.col,t.row,t.col);else{var e=W(t),n=c(f(e),Vt("defaultEventMinutes"));x(e,n)}},e)}function Z(t,e,n){var r=Ot.stop();Gt(),r&&Ut("drop",t,W(r),z(r),e,n)}var G=this;G.renderAgenda=r,G.setWidth=p,G.setHeight=g,G.afterRender=w,G.defaultEventEnd=_,G.timePosition=O,G.getIsCellAllDay=z,G.allDayRow=L,G.getCoordinateGrid=function(){return At},G.getHoverListener=function(){return Ot},G.colLeft=k,G.colRight=R,G.colContentLeft=H,G.colContentRight=N,G.getDaySegmentContainer=function(){return lt},G.getSlotSegmentContainer=function(){return ht},G.getMinMinute=function(){return Yt},G.getMaxMinute=function(){return Bt},G.getSlotContainer=function(){return vt},G.getRowCnt=function(){return 1},G.getColCnt=function(){return zt},G.getColWidth=function(){return Tt},G.getSnapHeight=function(){return Nt},G.getSnapMinutes=function(){return Ft},G.defaultSelectionEnd=B,G.renderDayOverlay=M,G.renderSelection=j,G.clearSelection=X,G.reportDayClick=V,G.dragStart=U,G.dragStop=Z,ut.call(G,t,e,n),pt.call(G),gt.call(G),Q.call(G);var $,K,tt,et,nt,rt,at,ot,it,st,lt,ct,ft,dt,vt,ht,wt,Ct,Mt,Et,St,Tt,xt,Ht,Ft,Rt,Nt,zt,Wt,At,Ot,Lt,_t,qt,Pt,Yt,Bt,jt,It,Xt,Jt,Vt=G.opt,Ut=G.trigger,Zt=G.renderOverlay,Gt=G.clearOverlays,$t=G.reportSelection,Kt=G.unselect,Qt=G.daySelectionMousedown,te=G.slotSegHtml,ee=G.cellToDate,ne=G.dateToCell,re=G.rangeToSegments,ae=e.formatDate,oe={};P(t.addClass("fc-agenda")),At=new mt(function(t,e){function n(t){return Math.max(s,Math.min(l,t))}var r,a,o;tt.each(function(t,n){r=Dt(n),a=r.offset().left,t&&(o[1]=a),o=[a],e[t]=o}),o[1]=a+r.outerWidth(),Vt("allDaySlot")&&(r=ft,a=r.offset().top,t[0]=[a,a+r.outerHeight()]);for(var i=vt.offset().top,s=dt.offset().top,l=s+dt.outerHeight(),c=0;Wt*Rt>c;c++)t.push([n(i+Nt*c),n(i+Nt*(c+1))])}),Ot=new yt(At),Lt=new bt(function(t){return rt.eq(t)}),_t=new bt(function(t){return at.eq(t)})}function Q(){function t(t,e){var r,a=t.length,i=[],s=[];for(r=0;a>r;r++)t[r].allDay?i.push(t[r]):s.push(t[r]);p("allDaySlot")&&(K(i,e),E()),o(n(s),e)}function e(){x().empty(),k().empty()}function n(t){var e,n,o,i,s,l=_(),u=N(),d=R(),v=Dt.map(t,a),h=[];for(n=0;l>n;n++)for(e=L(0,n),c(e,u),s=r(t,v,e,c(f(e),d-u)),s=tt(s),o=0;o<s.length;o++)i=s[o],i.col=n,h.push(i);return h}function r(t,e,n,r){var a,o,i,s,l,c,u,d,v=[],h=t.length;for(a=0;h>a;a++)o=t[a],i=o.start,s=e[a],s>n&&r>i&&(n>i?(l=f(n),u=!1):(l=i,u=!0),s>r?(c=f(r),d=!1):(c=s,d=!0),v.push({event:o,start:l,end:c,isStart:u,isEnd:d}));return v.sort(ct)}function a(t){return t.end?f(t.end):c(f(t.start),p("defaultEventMinutes"))}function o(t,e){var n,r,a,o,s,c,u,f,d,v,h,g,y,w,b,D,C=t.length,E="",S=k(),x=p("isRTL");for(n=0;C>n;n++)r=t[n],a=r.event,o=z(r.start,r.start),s=z(r.start,r.end),c=A(r.col),u=O(r.col),f=u-c,u-=.025*f,f=u-c,d=f*(r.forwardCoord-r.backwardCoord),p("slotEventOverlap")&&(d=Math.max(2*(d-10),d)),x?(h=u-r.backwardCoord*f,v=h-d):(v=c+r.backwardCoord*f,h=v+d),v=Math.max(v,c),h=Math.min(h,u),d=h-v,r.top=o,r.left=v,r.outerWidth=d,r.outerHeight=s-o,E+=i(a,r);for(S[0].innerHTML=E,g=S.children(),n=0;C>n;n++)r=t[n],a=r.event,y=Dt(g[n]),w=m("eventRender",a,a,y),w===!1?y.remove():(w&&w!==!0&&(y.remove(),y=Dt(w).css({position:"absolute",top:r.top,left:r.left}).appendTo(S)),r.element=y,a._id===e?l(a,y,r):y[0]._fci=n,X(a,y));for(M(S,t,l),n=0;C>n;n++)r=t[n],(y=r.element)&&(r.vsides=F(y,!0),r.hsides=T(y,!0),b=y.find(".fc-event-title"),b.length&&(r.contentTop=b[0].offsetTop));for(n=0;C>n;n++)r=t[n],(y=r.element)&&(y[0].style.width=Math.max(0,r.outerWidth-r.hsides)+"px",D=Math.max(0,r.outerHeight-r.vsides),y[0].style.height=D+"px",a=r.event,void 0!==r.contentTop&&D-r.contentTop<10&&(y.find("div.fc-event-time").text(et(a.start,p("timeFormat"))+" - "+a.title),y.find("div.fc-event-title").remove()),m("eventAfterRender",a,a,y))}function i(t,e){var n="<",r=t.url,a=B(t,p),o=["fc-event","fc-event-vert"];return y(t)&&o.push("fc-event-draggable"),e.isStart&&o.push("fc-event-start"),e.isEnd&&o.push("fc-event-end"),o=o.concat(t.className),t.source&&(o=o.concat(t.source.className||[])),n+=r?"a href='"+q(t.url)+"'":"div",n+=" class='"+o.join(" ")+"' style='position:absolute;top:"+e.top+"px;left:"+e.left+"px;"+a+"'><div class='fc-event-inner'><div class='fc-event-time'>"+q(nt(t.start,t.end,p("timeFormat")))+"</div><div class='fc-event-title'>"+q(t.title||"")+"</div></div><div class='fc-event-bg'></div>",e.isEnd&&w(t)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(r?"a":"div")+">"}function l(t,e,n){var r=e.find("div.fc-event-time");y(t)&&d(t,e,r),n.isEnd&&w(t)&&h(t,e,r),C(t,e)}function u(t,e,n){function r(){c||(e.width(a).height("").draggable("option","grid",null),c=!0)}var a,o,i,l=n.isStart,c=!0,u=H(),d=P(),h=Y(),g=j(),y=N();e.draggable({opacity:p("dragOpacity","month"),revertDuration:p("dragRevertDuration"),start:function(n,y){m("eventDragStart",e,t,n,y),V(t,e),a=e.width(),u.start(function(n,a){if($(),n){o=!1;var u=L(0,a.col),m=L(0,n.col);
i=v(m,u),n.row?l?c&&(e.width(d-10),S(e,h*Math.round((t.end?(t.end-t.start)/Rt:p("defaultEventMinutes"))/g)),e.draggable("option","grid",[d,1]),c=!1):o=!0:(G(s(f(t.start),i),s(D(t),i)),r()),o=o||c&&!i}else r(),o=!0;e.draggable("option","revert",o)},n,"drag")},stop:function(n,a){if(u.stop(),$(),m("eventDragStop",e,t,n,a),o)r(),e.css("filter",""),J(t,e);else{var s=0;c||(s=Math.round((e.offset().top-I().offset().top)/h)*g+y-(60*t.start.getHours()+t.start.getMinutes())),U(this,t,i,s,c,n,a)}}})}function d(t,e,n){function r(){$(),l&&(d?(n.hide(),e.draggable("option","grid",null),G(s(f(t.start),b),s(D(t),b))):(a(C),n.css("display",""),e.draggable("option","grid",[T,x])))}function a(e){var r,a=c(f(t.start),e);t.end&&(r=c(f(t.end),e)),n.text(nt(a,r,p("timeFormat")))}var o,i,l,u,d,h,y,w,b,C,M,E=g.getCoordinateGrid(),S=_(),T=P(),x=Y(),k=j();e.draggable({scroll:!1,grid:[T,x],axis:1==S?"y":!1,opacity:p("dragOpacity"),revertDuration:p("dragRevertDuration"),start:function(n,r){m("eventDragStart",e,t,n,r),V(t,e),E.build(),o=e.position(),i=E.cell(n.pageX,n.pageY),l=u=!0,d=h=W(i),y=w=0,b=0,C=M=0},drag:function(t,n){var a=E.cell(t.pageX,t.pageY);if(l=!!a){if(d=W(a),y=Math.round((n.position.left-o.left)/T),y!=w){var s=L(0,i.col),c=i.col+y;c=Math.max(0,c),c=Math.min(S-1,c);var f=L(0,c);b=v(f,s)}d||(C=Math.round((n.position.top-o.top)/x)*k)}(l!=u||d!=h||y!=w||C!=M)&&(r(),u=l,h=d,w=y,M=C),e.draggable("option","revert",!l)},stop:function(n,a){$(),m("eventDragStop",e,t,n,a),l&&(d||b||C)?U(this,t,b,d?0:C,d,n,a):(l=!0,d=!1,y=0,b=0,C=0,r(),e.css("filter",""),e.css(o),J(t,e))}})}function h(t,e,n){var r,a,o=Y(),i=j();e.resizable({handles:{s:".ui-resizable-handle"},grid:o,start:function(n,o){r=a=0,V(t,e),m("eventResizeStart",this,t,n,o)},resize:function(s,l){r=Math.round((Math.max(o,e.height())-l.originalSize.height)/o),r!=a&&(n.text(nt(t.start,r||t.end?c(b(t),i*r):null,p("timeFormat"))),a=r)},stop:function(n,a){m("eventResizeStop",this,t,n,a),r?Z(this,t,0,i*r,n,a):J(t,e)}})}var g=this;g.renderEvents=t,g.clearEvents=e,g.slotSegHtml=i,ft.call(g);var p=g.opt,m=g.trigger,y=g.isEventDraggable,w=g.isEventResizable,b=g.eventEnd,C=g.eventElementHandlers,E=g.setHeight,x=g.getDaySegmentContainer,k=g.getSlotSegmentContainer,H=g.getHoverListener,R=g.getMaxMinute,N=g.getMinMinute,z=g.timePosition,W=g.getIsCellAllDay,A=g.colContentLeft,O=g.colContentRight,L=g.cellToDate,_=g.getColCnt,P=g.getColWidth,Y=g.getSnapHeight,j=g.getSnapMinutes,I=g.getSlotContainer,X=g.reportEventElement,J=g.showEvents,V=g.hideEvents,U=g.eventDrop,Z=g.eventResize,G=g.renderDayOverlay,$=g.clearOverlays,K=g.renderDayEvents,Q=g.calendar,et=Q.formatDate,nt=Q.formatDates;g.draggableDayEvent=u}function tt(t){var e,n=et(t),r=n[0];if(nt(n),r){for(e=0;e<r.length;e++)rt(r[e]);for(e=0;e<r.length;e++)at(r[e],0,0)}return ot(n)}function et(t){var e,n,r,a=[];for(e=0;e<t.length;e++){for(n=t[e],r=0;r<a.length&&it(n,a[r]).length;r++);(a[r]||(a[r]=[])).push(n)}return a}function nt(t){var e,n,r,a,o;for(e=0;e<t.length;e++)for(n=t[e],r=0;r<n.length;r++)for(a=n[r],a.forwardSegs=[],o=e+1;o<t.length;o++)it(a,t[o],a.forwardSegs)}function rt(t){var e,n,r=t.forwardSegs,a=0;if(void 0===t.forwardPressure){for(e=0;e<r.length;e++)n=r[e],rt(n),a=Math.max(a,1+n.forwardPressure);t.forwardPressure=a}}function at(t,e,n){var r,a=t.forwardSegs;if(void 0===t.forwardCoord)for(a.length?(a.sort(lt),at(a[0],e+1,n),t.forwardCoord=a[0].backwardCoord):t.forwardCoord=1,t.backwardCoord=t.forwardCoord-(t.forwardCoord-n)/(e+1),r=0;r<a.length;r++)at(a[r],0,t.forwardCoord)}function ot(t){var e,n,r,a=[];for(e=0;e<t.length;e++)for(n=t[e],r=0;r<n.length;r++)a.push(n[r]);return a}function it(t,e,n){n=n||[];for(var r=0;r<e.length;r++)st(t,e[r])&&n.push(e[r]);return n}function st(t,e){return t.end>e.start&&t.start<e.end}function lt(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||ct(t,e)}function ct(t,e){return t.start-e.start||e.end-e.start-(t.end-t.start)||(t.event.title||"").localeCompare(e.event.title)}function ut(t,e,n){function r(t,e){var r=X[t];return Dt.isPlainObject(r)?_(r,e||n):r}function a(t,n){return e.trigger.apply(e,[t,n||O].concat(Array.prototype.slice.call(arguments,2),[O]))}function o(t){var e=t.source||{};return I(t.startEditable,e.startEditable,r("eventStartEditable"),t.editable,e.editable,r("editable"))&&!r("disableDragging")}function i(t){var e=t.source||{};return I(t.durationEditable,e.durationEditable,r("eventDurationEditable"),t.editable,e.editable,r("editable"))&&!r("disableResizing")}function l(t){Y={};var e,n,r=t.length;for(e=0;r>e;e++)n=t[e],Y[n._id]?Y[n._id].push(n):Y[n._id]=[n]}function u(){Y={},B={},j=[]}function d(t){return t.end?f(t.end):L(t)}function h(t,e){j.push({event:t,element:e}),B[t._id]?B[t._id].push(e):B[t._id]=[e]}function g(){Dt.each(j,function(t,e){O.trigger("eventDestroy",e.event,e.event,e.element)})}function p(t,e){e.click(function(n){return e.hasClass("ui-draggable-dragging")||e.hasClass("ui-resizable-resizing")?void 0:a("eventClick",this,t,n)}).hover(function(e){a("eventMouseover",this,t,e)},function(e){a("eventMouseout",this,t,e)})}function m(t,e){w(t,e,"show")}function y(t,e){w(t,e,"hide")}function w(t,e,n){var r,a=B[t._id],o=a.length;for(r=0;o>r;r++)e&&a[r][0]==e[0]||a[r][n]()}function b(t,e,n,r,o,i,s){var l=e.allDay,c=e._id;C(Y[c],n,r,o),a("eventDrop",t,e,n,r,o,function(){C(Y[c],-n,-r,l),P(c)},i,s),P(c)}function D(t,e,n,r,o,i){var s=e._id;M(Y[s],n,r),a("eventResize",t,e,n,r,function(){M(Y[s],-n,-r),P(s)},o,i),P(s)}function C(t,e,n,r){n=n||0;for(var a,o=t.length,i=0;o>i;i++)a=t[i],void 0!==r&&(a.allDay=r),c(s(a.start,e,!0),n),a.end&&(a.end=c(s(a.end,e,!0),n)),q(a,X)}function M(t,e,n){n=n||0;for(var r,a=t.length,o=0;a>o;o++)r=t[o],r.end=c(s(d(r),e,!0),n),q(r,X)}function E(t){return"object"==typeof t&&(t=t.getDay()),U[t]}function S(){return J}function T(t,e,n){for(e=e||1;U[(t.getDay()+(n?e:0)+7)%7];)s(t,e)}function x(){var t=k.apply(null,arguments),e=H(t),n=F(e);return n}function k(t,e){var n=O.getColCnt(),r=$?-1:1,a=$?n-1:0;"object"==typeof t&&(e=t.col,t=t.row);var o=t*n+(e*r+a);return o}function H(t){var e=O.visStart.getDay();return t+=Z[e],7*Math.floor(t/J)+G[(t%J+J)%J]-e}function F(t){var e=f(O.visStart);return s(e,t),e}function R(t){var e=N(t),n=z(e),r=W(n);return r}function N(t){return v(t,O.visStart)}function z(t){var e=O.visStart.getDay();return t+=e,Math.floor(t/7)*J+Z[(t%7+7)%7]-Z[e]}function W(t){var e=O.getColCnt(),n=$?-1:1,r=$?e-1:0,a=Math.floor(t/e),o=(t%e+e)%e*n+r;return{row:a,col:o}}function A(t,e){for(var n=O.getRowCnt(),r=O.getColCnt(),a=[],o=N(t),i=N(e),s=z(o),l=z(i)-1,c=0;n>c;c++){var u=c*r,f=u+r-1,d=Math.max(s,u),v=Math.min(l,f);if(v>=d){var h=W(d),g=W(v),p=[h.col,g.col].sort(),m=H(d)==o,y=H(v)+1==i;a.push({row:c,leftCol:p[0],rightCol:p[1],isStart:m,isEnd:y})}}return a}var O=this;O.element=t,O.calendar=e,O.name=n,O.opt=r,O.trigger=a,O.isEventDraggable=o,O.isEventResizable=i,O.setEventData=l,O.clearEventData=u,O.eventEnd=d,O.reportEventElement=h,O.triggerEventDestroy=g,O.eventElementHandlers=p,O.showEvents=m,O.hideEvents=y,O.eventDrop=b,O.eventResize=D;var L=O.defaultEventEnd,q=e.normalizeEvent,P=e.reportEventChange,Y={},B={},j=[],X=e.options;O.isHiddenDay=E,O.skipHiddenDays=T,O.getCellsPerWeek=S,O.dateToCell=R,O.dateToDayOffset=N,O.dayOffsetToCellOffset=z,O.cellOffsetToCell=W,O.cellToDate=x,O.cellToCellOffset=k,O.cellOffsetToDayOffset=H,O.dayOffsetToDate=F,O.rangeToSegments=A;var J,V=r("hiddenDays")||[],U=[],Z=[],G=[],$=r("isRTL");!function(){r("weekends")===!1&&V.push(0,6);for(var t=0,e=0;7>t;t++)Z[t]=e,U[t]=-1!=Dt.inArray(t,V),U[t]||(G[e]=t,e++);if(J=e,!J)throw"invalid hiddenDays"}()}function ft(){function t(t,e){var r=n(t,!1,!0);vt(r,function(t,e){R(t.event,e)}),y(r,e),vt(r,function(t,e){x("eventAfterRender",t.event,t.event,e)})}function e(t,e,r){var a=n([t],!0,!1),o=[];return vt(a,function(t,n){t.row===e&&n.css("top",r),o.push(n[0])}),o}function n(t,e,n){var a,s,l=U(),f=e?Dt("<div/>"):l,d=r(t);return o(d),a=i(d),f[0].innerHTML=a,s=f.children(),e&&l.append(s),c(d,s),vt(d,function(t,e){t.hsides=T(e,!0)}),vt(d,function(t,e){e.width(Math.max(0,t.outerWidth-t.hsides))}),vt(d,function(t,e){t.outerHeight=e.outerHeight(!0)}),u(d,n),d}function r(t){for(var e=[],n=0;n<t.length;n++){var r=a(t[n]);e.push.apply(e,r)}return e}function a(t){for(var e=t.start,n=D(t),r=tt(e,n),a=0;a<r.length;a++)r[a].event=t;return r}function o(t){for(var e=S("isRTL"),n=0;n<t.length;n++){var r=t[n],a=(e?r.isEnd:r.isStart)?J:I,o=(e?r.isStart:r.isEnd)?V:X,i=a(r.leftCol),s=o(r.rightCol);r.left=i,r.outerWidth=s-i}}function i(t){for(var e="",n=0;n<t.length;n++)e+=l(t[n]);return e}function l(t){var e="",n=S("isRTL"),r=t.event,a=r.url,o=["fc-event","fc-event-hori"];k(r)&&o.push("fc-event-draggable"),t.isStart&&o.push("fc-event-start"),t.isEnd&&o.push("fc-event-end"),o=o.concat(r.className),r.source&&(o=o.concat(r.source.className||[]));var i=B(r,S);return e+=a?"<a href='"+q(a)+"'":"<div",e+=" class='"+o.join(" ")+"' style='position:absolute;left:"+t.left+"px;"+i+"'><div class='fc-event-inner'>",!r.allDay&&t.isStart&&(e+="<span class='fc-event-time'>"+q(Z(r.start,r.end,S("timeFormat")))+"</span>"),e+="<span class='fc-event-title'>"+q(r.title||"")+"</span></div>",t.isEnd&&H(r)&&(e+="<div class='ui-resizable-handle ui-resizable-"+(n?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),e+="</"+(a?"a":"div")+">"}function c(t,e){for(var n=0;n<t.length;n++){var r=t[n],a=r.event,o=e.eq(n),i=x("eventRender",a,a,o);i===!1?o.remove():(i&&i!==!0&&(i=Dt(i).css({position:"absolute",left:r.left}),o.replaceWith(i),o=i),r.element=o)}}function u(t,e){var n=d(t),r=m(),a=[];if(e)for(var o=0;o<r.length;o++)r[o].height(n[o]);for(var o=0;o<r.length;o++)a.push(r[o].position().top);vt(t,function(t,e){e.css("top",a[t.row]+t.top)})}function d(t){for(var e=_(),n=Y(),r=[],a=h(t),o=0;e>o;o++){for(var i=a[o],s=[],l=0;n>l;l++)s.push(0);for(var c=0;c<i.length;c++){var u=i[c];u.top=O(s.slice(u.leftCol,u.rightCol+1));for(var l=u.leftCol;l<=u.rightCol;l++)s[l]=u.top+u.outerHeight}r.push(O(s))}return r}function h(t){var e,n,r,a=_(),o=[];for(e=0;e<t.length;e++)n=t[e],r=n.row,n.element&&(o[r]?o[r].push(n):o[r]=[n]);for(r=0;a>r;r++)o[r]=g(o[r]||[]);return o}function g(t){for(var e=[],n=p(t),r=0;r<n.length;r++)e.push.apply(e,n[r]);return e}function p(t){t.sort(ht);for(var e=[],n=0;n<t.length;n++){for(var r=t[n],a=0;a<e.length&&dt(r,e[a]);a++);e[a]?e[a].push(r):e[a]=[r]}return e}function m(){var t,e=_(),n=[];for(t=0;e>t;t++)n[t]=j(t).find("div.fc-day-content > div");return n}function y(t,e){var n=U();vt(t,function(t,n,r){var a=t.event;a._id===e?w(a,n,t):n[0]._fci=r}),M(n,t,w)}function w(t,e,n){k(t)&&E.draggableDayEvent(t,e,n),n.isEnd&&H(t)&&E.resizableDayEvent(t,e,n),N(t,e)}function b(t,e){var n,r=Q();e.draggable({delay:50,opacity:S("dragOpacity"),revertDuration:S("dragRevertDuration"),start:function(a,o){x("eventDragStart",e,t,a,o),W(t,e),r.start(function(r,a,o,i){if(e.draggable("option","revert",!r||!o&&!i),$(),r){var l=et(a),c=et(r);n=v(c,l),G(s(f(t.start),n),s(D(t),n))}else n=0},a,"drag")},stop:function(a,o){r.stop(),$(),x("eventDragStop",e,t,a,o),n?A(this,t,n,0,t.allDay,a,o):(e.css("filter",""),z(t,e))}})}function C(t,n,r){var a=S("isRTL"),o=a?"w":"e",i=n.find(".ui-resizable-"+o),l=!1;P(n),n.mousedown(function(t){t.preventDefault()}).click(function(t){l&&(t.preventDefault(),t.stopImmediatePropagation())}),i.mousedown(function(a){function i(e){x("eventResizeStop",this,t,e),Dt("body").css("cursor",""),f.stop(),$(),c&&L(this,t,c,0,e),setTimeout(function(){l=!1},0)}if(1==a.which){l=!0;var c,u,f=Q(),d=(_(),Y(),n.css("top")),v=Dt.extend({},t),h=ot(at(t.start));K(),Dt("body").css("cursor",o+"-resize").one("mouseup",i),x("eventResizeStart",this,t,a),f.start(function(n,a){if(n){var i=nt(a),l=nt(n);if(l=Math.max(l,h),c=rt(l)-rt(i)){v.end=s(F(t),c,!0);var f=u;u=e(v,r.row,d),u=Dt(u),u.find("*").css("cursor",o+"-resize"),f&&f.remove(),W(t)}else u&&(z(t),u.remove(),u=null);$(),G(t.start,s(D(t),c))}},a)}})}var E=this;E.renderDayEvents=t,E.draggableDayEvent=b,E.resizableDayEvent=C;var S=E.opt,x=E.trigger,k=E.isEventDraggable,H=E.isEventResizable,F=E.eventEnd,R=E.reportEventElement,N=E.eventElementHandlers,z=E.showEvents,W=E.hideEvents,A=E.eventDrop,L=E.eventResize,_=E.getRowCnt,Y=E.getColCnt,j=(E.getColWidth,E.allDayRow),I=E.colLeft,X=E.colRight,J=E.colContentLeft,V=E.colContentRight,U=(E.dateToCell,E.getDaySegmentContainer),Z=E.calendar.formatDates,G=E.renderDayOverlay,$=E.clearOverlays,K=E.clearSelection,Q=E.getHoverListener,tt=E.rangeToSegments,et=E.cellToDate,nt=E.cellToCellOffset,rt=E.cellOffsetToDayOffset,at=E.dateToDayOffset,ot=E.dayOffsetToCellOffset}function dt(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(r.leftCol<=t.rightCol&&r.rightCol>=t.leftCol)return!0}return!1}function vt(t,e){for(var n=0;n<t.length;n++){var r=t[n],a=r.element;a&&e(r,a,n)}}function ht(t,e){return e.rightCol-e.leftCol-(t.rightCol-t.leftCol)||e.event.allDay-t.event.allDay||t.event.start-e.event.start||(t.event.title||"").localeCompare(e.event.title)}function gt(){function t(t,r,a){e(),r||(r=s(t,a)),l(t,r,a),n(t,r,a)}function e(t){u&&(u=!1,c(),i("unselect",null,t))}function n(t,e,n,r){u=!0,i("select",null,t,e,n,r)}function r(t){var r=a.cellToDate,i=a.getIsCellAllDay,s=a.getHoverListener(),u=a.reportDayClick;if(1==t.which&&o("selectable")){e(t);var f;s.start(function(t,e){c(),t&&i(t)?(f=[r(e),r(t)].sort(A),l(f[0],f[1],!0)):f=null},t),Dt(document).one("mouseup",function(t){s.stop(),f&&(+f[0]==+f[1]&&u(f[0],!0,t),n(f[0],f[1],!0,t))})}}var a=this;a.select=t,a.unselect=e,a.reportSelection=n,a.daySelectionMousedown=r;var o=a.opt,i=a.trigger,s=a.defaultSelectionEnd,l=a.renderSelection,c=a.clearSelection,u=!1;o("selectable")&&o("unselectAuto")&&Dt(document).mousedown(function(t){var n=o("unselectCancel");n&&Dt(t.target).parents(n).length||e(t)})}function pt(){function t(t,e){var n=a.shift();return n||(n=Dt("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),n[0].parentNode!=e[0]&&n.appendTo(e),r.push(n.css(t).show()),n}function e(){for(var t;t=r.shift();)a.push(t.hide().unbind())}var n=this;n.renderOverlay=t,n.clearOverlays=e;var r=[],a=[]}function mt(t){var e,n,r=this;r.build=function(){e=[],n=[],t(e,n)},r.cell=function(t,r){var a,o=e.length,i=n.length,s=-1,l=-1;for(a=0;o>a;a++)if(r>=e[a][0]&&r<e[a][1]){s=a;break}for(a=0;i>a;a++)if(t>=n[a][0]&&t<n[a][1]){l=a;break}return s>=0&&l>=0?{row:s,col:l}:null},r.rect=function(t,r,a,o,i){var s=i.offset();return{top:e[t][0]-s.top,left:n[r][0]-s.left,width:n[o][1]-n[r][0],height:e[a][1]-e[t][0]}}}function yt(t){function e(e){wt(e);var n=t.cell(e.pageX,e.pageY);(!n!=!o||n&&(n.row!=o.row||n.col!=o.col))&&(n?(a||(a=n),r(n,a,n.row-a.row,n.col-a.col)):r(n,a),o=n)}var n,r,a,o,i=this;i.start=function(i,s,l){r=i,a=o=null,t.build(),e(s),n=l||"mousemove",Dt(document).bind(n,e)},i.stop=function(){return Dt(document).unbind(n,e),o}}function wt(t){void 0===t.pageX&&(t.pageX=t.originalEvent.pageX,t.pageY=t.originalEvent.pageY)}function bt(t){function e(e){return r[e]=r[e]||t(e)}var n=this,r={},a={},o={};n.left=function(t){return a[t]=void 0===a[t]?e(t).position().left:a[t]},n.right=function(t){return o[t]=void 0===o[t]?n.left(t)+e(t).width():o[t]},n.clear=function(){r={},a={},o={}}}var Dt=t("jquery"),Ct={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},Mt={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Et=Dt.fullCalendar={version:"1.6.4"},St=Et.views={};Dt.fn.fullCalendar=function(t){if("string"==typeof t){var e,r=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=Dt.data(this,"fullCalendar");if(n&&Dt.isFunction(n[t])){var a=n[t].apply(n,r);void 0===e&&(e=a),"destroy"==t&&Dt.removeData(this,"fullCalendar")}}),void 0!==e?e:this}t=t||{};var a=t.eventSources||[];return delete t.eventSources,t.events&&(a.push(t.events),delete t.events),t=Dt.extend(!0,{},Ct,t.isRTL||void 0===t.isRTL&&Ct.isRTL?Mt:{},t),this.each(function(e,r){var o=Dt(r),i=new n(o,t,a);o.data("fullCalendar",i),i.render()}),this},Et.sourceNormalizers=[],Et.sourceFetchers=[];var Tt={dataType:"json",cache:!1},xt=1;Et.addDays=s,Et.cloneDate=f,Et.parseDate=g,Et.parseISO8601=p,Et.parseTime=m,Et.formatDate=y,Et.formatDates=w;var kt=["sun","mon","tue","wed","thu","fri","sat"],Ht=864e5,Ft=36e5,Rt=6e4,Nt={s:function(t){return t.getSeconds()},ss:function(t){return L(t.getSeconds())},m:function(t){return t.getMinutes()},mm:function(t){return L(t.getMinutes())},h:function(t){return t.getHours()%12||12},hh:function(t){return L(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return L(t.getHours())},d:function(t){return t.getDate()},dd:function(t){return L(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return L(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return(t.getFullYear()+"").substring(2)},yyyy:function(t){return t.getFullYear()},t:function(t){return t.getHours()<12?"a":"p"},tt:function(t){return t.getHours()<12?"am":"pm"},T:function(t){return t.getHours()<12?"A":"P"},TT:function(t){return t.getHours()<12?"AM":"PM"},u:function(t){return y(t,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(t){var e=t.getDate();return e>10&&20>e?"th":["st","nd","rd"][e%10-1]||"th"},w:function(t,e){return e.weekNumberCalculation(t)},W:function(t){return b(t)}};return Et.dateFormatters=Nt,Et.applyAll=j,St.month=X,St.basicWeek=J,St.basicDay=V,e({weekMode:"fixed"}),St.agendaWeek=G,St.agendaDay=$,e({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0}),Et});